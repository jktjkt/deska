This is Deska, a tool for central administration of a grid site; for details,
please see http://projects.flaska.net/projects/show/deska .

This is free software, dual-licensed under the GPLv2 and GPLv3.

Build instructions for the C++ CLI interface:

1) mkdir _build && cd _build
2) cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
3) make -j4

Setup for the SQL server side (see doc/misc/pgsql-setup for details):

1) create db deska_dev, a user with roles deska_admin and deska_user,
create language pgpython in the deska_dev database
2) run deska_install.sh -d deska_dev -u postgres install --all

If you change modules, run deska_install.sh -d deska_dev -u user restore
-- user must be deska_admin.

Unit test setup:
----------------

If you want to include unit tests for the SQL side of Deska in `make test` runs, do the following:

1) Install pgTAP support script pg_prove and don't touch the SQL database
2) Pass the "-DRUN_SQL_TESTS=1" to cmake; if you want to not drop the DB before
each test, also specify -DDESKA_SQL_TEST_FAST_BUT_NONDETERMINISTIC=1
3) Make sure that the PgSQL server is running and that you can authorize under a
different user (ie. "trust" instead of "ident" in the pg_hba.conf for local
connections). Some of the tests require DB superuser.
4) Run the following exactly once: `./tests/sql/util-create-shared-roles.sh`
5) Enjoy `make test` runs
6) In case the DB setup gets hosed, you can force a one-time regeneration via
removing the "tests/sql/.db_initialized" file in the build directory.
