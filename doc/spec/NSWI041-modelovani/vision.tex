\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[english,czech]{babel}
\usepackage{a4wide}
\author{Tomáš Hubík}
\title{Deska Scope Document}



\begin{document}

{\Huge \textbf{Deska}}

\vspace{0.2in}

{\large Tool for Central Administration of a Grid Site}

\vspace{0.5in}

{\large Scope Document}

\vspace{0.2in}

{\large Prepared for the Institute of Physics of the AS CR}

\vspace{0.2in}

{\large Version 1.2}

\vspace{0.2in}

{\large Date 2009-Nov-12}

\vspace{0.5in}

\subsection*{Revision History}

\begin{table}[!h]
	\begin{tabular}{l l l l}
		\textbf{Date} & \textbf{Version} & \textbf{Author} & \textbf{Description} \\
		2009-Oct-23 & V1.0 & Tomáš Hubík & Master plan \\
		2009-Oct-27 & V1.1 & Tomáš Hubík & Features specified \\
		2009-Nov-12 & V1.2 & Jan Kundrát & Changed the scope to aim at the
        Dashboard \\
	\end{tabular}
	\label{tab:RevisionHistory}
\end{table}


\subsection*{Document Review}

\begin{table}[!h]
	\begin{tabular}{l l l l}
		\textbf{Date} & \textbf{Version} & \textbf{Reviewer Name} & \textbf{Contact Info.} \\
	\end{tabular}
	\label{tab:DocumentReview}
\end{table}


\subsection*{Document Approval}

\begin{table}[!h]
	\begin{tabular}{l l l l}
		\textbf{Date} & \textbf{Version} & \textbf{Reviewer Name} & \textbf{Contact Info.} \\
	\end{tabular}
	\label{tab:DocumentApproval}
\end{table}


\newpage

\tableofcontents

\newpage

\section{Introduction}

\subsection{Purpose}
This document defines the project scope for the Tool for Central Administration of a Grid Site. It establishes the business need for 
the Deska, and it outlines the high level requirements needed to satisfy the specified need. This document is not an exhaustive 
requirements description, but will instead provide overall direction for a separate -- more detailed -- set of system requirements. 
This document's primary purpose is to establish priority among the most important issues, considerations, features, and overall goals.

\subsection{Scope}
The Deska will be responsible for managing and monitoring of a grid site. A
first goal is to automate configuration of several monitoring and deployment
tools, the second one is to provide a single web-based dashboard to look at the
status of the site from different perspectives and to integrate the output of
various monitoring tools, both in-house and remote, to a single place to check.


\section{Business Opportunity}

\subsection{Background}
One of the activities taking at the Institute of Physics of the AS CR (FZU) is running a local Tier-2 computing center connected to 
an international WLCG computing grid, running user programs from various scientific communities from the whole world. Currently 
installed capacity of the clusters is about 1500 CPUs with more than 250TB of disk storage. The center itself consists of several 
hundreds of physical machines. While certain policies and management tools were developed and deployed over the years, the center 
still lacks a centralized dashboard listing the state of various resources.\\
The administrators were pretty successful at deploying various industrial-standard management and monitoring tools. Nagios is used 
for fabric monitoring, most of the machine's configuration is being handled by Cfengine. SNMP agents are used for monitoring 
critical parts of the network infrastructure and Munin is used for generating graphs depicting performance characteristics of the 
computing nodes. Various in-house applications were developed to assist with keeping track of HW issues and interesting events.\\
Unfortunately, all these tools are currently being managed in an isolated manner. Despite some efforts, there is still no central 
place to define roles of machines which would in turn be used by all the other tools.

 
\subsection{Positioning}
The system will not replace any of the existing monitoring tools. It will replace only their web interfaces and display all the 
information by itself in a well-arranged way. It will substitute the unpractical way of configuration of currently used tools, 
that must be made manually by editing of several files now.

\subsection{Impact of Missed Opportunity}
The need for this system is motivated by several factors.  First of them is the duplication of information in current
implementation -- for example, the ``logical role'' of a system is currently defined on at least five places, and any change thus
needs to happen at all of them or inconsistencies show up.  Experience shows that any site which rolls out a similar
de-duplicating tool immediately improves their availability and reliability numbers.  Furthermore, certain tasks like deploying
new machines is made substantively easier by having just one place to perform any modifications.  Due to the nature of the
Institute, hard numbers are hard to estimate, but reducing deployment times by an {\bf order of magnitude} and at least {\bf
halving the maintenance windows} are not unheard of, and therefore build a rough estimate.

In an attempt to gather statistical data, the Institute's staff attempted to keep track of accidents and exceptional situations
encountered during a typical system maintenance.  It is important to note that many possible sources of trouble tend not to
manifest themselves too often, and therefore it is entirely expected that they did not contribute to this experiment at all.
Examples of such phenomenons are network issues which typically arise only when people are actually touching the equipment, like
when installing new computational resources.  No new machine installation took place and the staffers were not performing any
network maintenance at all.

One of the most critical problems encountered was the failure of 63 jobs belonging to the Atlas VO.  This interruption was
triggered by a scheduled reboot of a DPM disk pool node due to security reasons.  While both the managers and staffers of the
Institute recognize the importance of applying security patches, this particular situation could have been handled more
gracefully.  Had the administrator who was performing the kernel upgrade on the file server been aware of an ongoing activity
reaching the particular storage node, he might have decreased the number of allocated slots for production Atlas jobs, thus
limiting the number of failed jobs.  The staffers of the Institute are firmly convinced that a comprehensive dashboard, ideally
one matching the criteria specified in this text, would have mitigated the risk of failed production jobs.

Due to the nature of the grid site and the WLCG funding model, there are no financial loses associated with the unexpected
troubles.  The only damage which the site had suffered from was confined on the ``political'' and reputation level, as all
resource pledges were still fulfilled throughout the month.  Therefore, the management of the Institute refused to give any
estimate on possible financial risk associated with the missed opportunity, should the system not be put in place.

Even more beneficial is the Dashboard, a system for aggregating monitoring and performance data from various places, both local
and from throughout the Grid.  The EGEE and WLCG projects have been successful in developing a number of monitoring tools, which
typically overlap in their scope for increased robustness.  However, the main problem of these tolls remains in their isolation.
As there are many places, many websites which publish their opinion about a site's availability and reliability, it is common for
system administrators to overlook certain minor indicators until the situation (and the provided service) deteriorates
significantly.  All of the staff at the Institute, both administrators and managers included, firmly believe that having a system
aggregating all the monitoring metrics will {\bf significantly reduce the latency between the discovery of a problem} by an
automated tool and {\bf the fix}.

Should the system not be put in place, it is expected that the grid site of the Institute will not cope with increased demands at
data processing, typically introduced by the scheduled start of the LHC accelerator and subsequent sudden increase in processed
jobs and managed data.

We are currently not aware of any competitive project with similar aims, and therefore believe that Deska could be successfully
offered to other sites in the WLCG and EGEE/EGI Grid, therefore establishing the reputation of the Institute and CESNET as leading
players in the international collaboration scene.

\section{Proposed Solution}

\subsection{Primary Functional Requirements}
In this section, we classify the primary features of the Tool for Central Administration of a Grid Site across three categories. 
Essential features cannot be done without. High-value features can be done without, although it may be very undesirable to do so. 
Follow-on Features are those for which it is not clear they should be included in the first release. In all cases, the lists are not 
exhaustive but include the most important features from a business perspective.

\subsubsection{Essential Features}
\begin{itemize}
	\item Central storage of authoritative information about the whole grid site
	\item Generating configuration files for various tools. For example Nagios, Cfengine
	\item Unified API for creating other modules
\end{itemize}

\subsubsection{High-Value Features}
\begin{itemize}
	\item Data aggregation from more tools to one well-arranged place, one place where to look for problems
\end{itemize}

\subsubsection{Follow-on Features}
\begin{itemize}
	\item Data correlation about load from various sources to determine if there is some dead lock, or hung application
	\item Implementation of modules for other tools, than those, that are currently used on FZU
\end{itemize}

\subsection{Primary Non-Functional Requirements (NFRs)}
In this section, we identify the primary non-functional requirements for the Tool for Central Administration of a Grid Site. This 
list is not exhaustive but is intended to capture the most important requirements from a business perspective. A full list of NFRs 
will be included in the SRS document.

\subsubsection{Performance, Throughput, and Scalability}
The system is expected to handle up to thousands of managed machines, tens of administrators with about ten changes performed each hour.\\
The system will provide a high level of scalability, so we will be able to run it over various monitoring and deployment tools. 
Configuring of single applications will be made by modules. These modules will use our system's API, so creating a new module for 
another application will be an easy task.

\subsubsection{Reliability and Availability}
Because of the fact, that our system will not replace any of the functional parts of current system, it is not necessary to be 
available 7 by 24 by 365.\\
It is necessary to be well protected against failure while generating configuration files, because this failure can lead to failure 
of the whole grid site. This will be made by some versioning of these files, so there will be some way back if this failure occurs.

\subsubsection{Security}
Several features of the system require authorization. The system will be divided into security levels. Each level will be allowed 
to make changes only of some attributes. Every module will have some list of attributes, which it will need, so if somebody 
does not have permission for changing all these required attributes, he will not be allowed to activate this module.

\subsubsection{Usability}
The application will be used by administrators who speak english, so the system will initially be translated into English.\\
It is also expected, that administrators have some experience with grid site maintenance.


\section{Risks}
Making some mistake in changing of attributes can have very serious consequence to the whole grid site. Therefore administrator can
check all generated configuration files and can make the final decision whether apply these changes, or not.


\section{Constraints}

\subsection{Development Process and Team Constraints}
At this time, there are no known constraints.

\subsection{Environmental and Technology Constraints}
At this time, there are no known constraints.

\subsection{Delivery and Deployment Constraints}
The application will be hosted on some machine with UNIX type operating system. The web part of the system will be browser 
independent.\\
FZU wants to have a possibility to influence the essential parts of design of the system, so we have to discuss all important issues
with administrators of FZU.

\end{document}
